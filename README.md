# Люди XX века
Здесь хранятся материалы и код проекта «Люди XX века»

*To be continued...*

## Установка
Для работы потребуется установить Python 3 и docker.

Чтобы создать базу данных (Mongo DB) и очередь сообщений (RabbitMQ) в докере пропишите пароли
в файл `secrets.py` (шаблон есть в файле `secrets.py.template`), а также скопируйте эти же
пароли в `setup.sh` (шаблон файла лежит в `setup.sh.template`).

Запустите файл `setup.sh`. При этом будут скачаны и установлены Mongo и Rabbit, а также
будут настроены пользователи с нужными правами и созданы пустые базы данных.

Файл `secrets.py` потребуется, чтобы скрипты могли подключаться к базам данных и очередям сообщений.

## Запуск worker-ов
Запускаются снаружи проекта:
* `python3 -m 20th_century_people.workers.crawler` — краулер (скачиватель страниц). Читает из очереди `to_download` сообщения вида `url` или `url{tab}output_queue`. Если `output_queue` задан, то при удачном скачивании, в очередь с таким именем отправляется сообщение с url. Если случилась какая-либо ошибка, исходное сообщение отправляется в очередь `failed_download`.
